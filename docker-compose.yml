version: '2'
services:
 zookeeper:
   image: wurstmeister/zookeeper
   ports:
     - "2181:2181"

 kafka:
   image: wurstmeister/kafka
   ports:
     - "9092"
   environment:
     KAFKA_ADVERTISED_HOST_NAME: 172.23.239.80
     KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
   links:
     - zookeeper
   depends_on:
     - zookeeper
   volumes:
     - /var/run/docker.sock:/var/run/docker.sock

 influxdb:
   image: influxdb:0.13
   volumes:
     - ./data/influxdb:/var/lib/influxdb
   ports:
     - "8086:8086"

 client:
   image: client
   build: client/.
   ports:
     - "8082:8082"
   expose:
     - "8082"
   container_name: "client"

 monitoring-server:
   image:  spring
   build:  monitoring-server/.
   restart:  always
   network_mode:  host
   container_name:  monitoring-server
   depends_on:
     -  influxdb
     -  client
   ports:
     -  8080:8080
   expose:
     -  8080

 angular:
   image: ang-d3
   build: ang-d3/.
   ports: 
     - "4200:4200"
   expose: 
     - "4200"
   container_name: "angular"

 artifactory:
   image: docker.bintray.io/jfrog/artifactory-oss:latest
   container_name: artifactory1
   ports:
     - "8081:8081"
   expose:
     - "8081"
