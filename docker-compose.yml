version: '2'
services:
 influxdb:
   image: influxdb:0.13
   volumes:
     - ./data/influxdb:/var/lib/influxdb
   ports:
     - 8086:8086
   container_name: influxdb

 client-server:
   image: client-server
   build: client-server/.
   ports:
     - 8082:8082
   expose:
     - 8082
   container_name: client-server

 monitoring-server:
   image:  monitoring-server
   build:  monitoring-server/.
   restart:  always
   #  network_mode:  host
   container_name:  monitoring-server
   depends_on:
     -  influxdb
     -  client-server
   ports:
     -  8080:8080
   expose:
     -  8080

 angular:
   image: app-monitor-ui
   build: app-monitor-ui/.
   ports: 
     - 4200:4200
   expose: 
     - 4200
   container_name: angular

 agenttodocker:
   image:  harsha7890/agenttomonitordocker:v04
   restart: always
   network_mode:  host
   volumes:
     -  /var/run/docker.sock:/var/run/docker.sock
   ports:
     -  9001:9001   
